(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail"],{"0812":function(t,n,e){},4468:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("e14b"),a=t.createInnerAudioContext();a.autoplay=!1,a.src="";var o={computed:{getTime:function(){return function(t){var n=new Date(t);return n.getFullYear()+"年"+(n.getMonth()+1)+"月"+n.getDate()+"日"}}},data:function(){return{isstart:!1,deg:0,Trrotate:"rotate(0deg)",Timeout:null,songUrl:"",songDetail:{picUrl:"",name:"",songname:""},songLyric:[],lyricIndex:0,timer:null,songSimi:[],songComment:[]}},onLoad:function(n){t.showLoading({title:"加载中"}),this.setData(n.songId),setTimeout((function(){t.hideLoading()}),500)},onUnload:function(){a.destroy()},methods:{onpause:function(){this.isstart=!1,clearInterval(this.Timeout),a.pause()},onplay:function(){var t=this;this.isstart=!0,this.Timeout=setInterval((function(){t.deg=(.5+t.deg)%360,t.Trrotate="rotate("+t.deg+"deg)"}),25),0==this.deg&&(a.src=this.songUrl),a.play(),this.listenLyricIndex()},songstart:function(){1==this.isstart?this.onpause():this.onplay()},formatTimeToSec:function(t){var n=t.split(":");return(60*parseFloat(n[0])+parseFloat(n[1])).toFixed(2)},setData:function(n){var e=this;(0,i.songUrl)(n).then((function(t){e.songUrl=t[1].data.data[0].url})),(0,i.songDetail)(n).then((function(t){var n=t[1].data.songs[0];e.songDetail.picUrl=n.al.picUrl,e.songDetail.name=n.al.name,e.songDetail.songname=n.name})),(0,i.songLyric)(n).then((function(t){var n=t[1].data.lrc.lyric,i=[],a=/\[([^\]]+)\]([^[]+)/g;n.replace(a,(function(t,n,a){i.push({time:e.formatTimeToSec(n),lyric:a})})),e.songLyric=i})),(0,i.songSimi)(n).then((function(t){e.songSimi=t[1].data.songs})),(0,i.songComment)(n).then((function(t){e.songComment=t[1].data.hotComments})),setTimeout((function(){t.setNavigationBarTitle({title:e.songDetail.songname})}),500)},listenLyricIndex:function(){var t=this;clearInterval(this.timer),this.timer=setInterval((function(){for(var n=0;n<t.songLyric.length;n++){if(t.songLyric[t.songLyric.length-1].time<a.currentTime){t.lyricIndex=t.songLyric.length-1;break}t.songLyric[n].time<a.currentTime&&t.songLyric[n+1].time>a.currentTime&&(t.lyricIndex=n)}}))},songliten:function(t){this.setData(t),a.stop(),this.deg=0,this.onpause()}}};n.default=o}).call(this,e("543d")["default"])},"58a8":function(t,n,e){"use strict";e.r(n);var i=e("df4c"),a=e("ec61");for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("ebf9");var r,s=e("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"7348e6b6",null,!1,i["a"],r);n["default"]=c.exports},abf8:function(t,n,e){"use strict";(function(t){e("48cc");i(e("66fd"));var n=i(e("58a8"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("543d")["createPage"])},df4c:function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var a=function(){var t=this,n=t.$createElement,i=(t._self._c,e("8beb")),a=e("2fd3"),o=e("9260"),r=e("1fdc"),s=e("5152"),c=e("fe2c"),u=e("eb0d"),l=t.__map(t.songComment,(function(n,i){var a=t.__get_orig(n),o=n.user.avatarUrl?null:e("77c6"),r=t.getTime(n.time);return{$orig:a,m6:o,m7:r}}));t.$mp.data=Object.assign({},{$root:{m0:i,m1:a,m2:o,m3:r,m4:s,m5:c,m8:u,l0:l}})},o=[]},ebf9:function(t,n,e){"use strict";var i=e("0812"),a=e.n(i);a.a},ec61:function(t,n,e){"use strict";e.r(n);var i=e("4468"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a}},[["abf8","common/runtime","common/vendor"]]]);